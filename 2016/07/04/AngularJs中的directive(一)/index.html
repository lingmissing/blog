<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>
    AngularJs中的directive（一） | 时光的涂鸦墙 | code is poetry
  </title>

  
  <meta name="author" content="elaine">
  

  
  <meta name="description" content="JavaScript Developer">
  

  
  
  <meta name="keywords" content="angular">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  
  <meta property="og:title" content="AngularJs中的directive（一）" />
  

  <meta property="og:site_name" content="时光的涂鸦墙" />

  
  <meta property="og:image" content="/blog/favicon.ico" />
  

  <link href="/blog/logo.jpg" rel="icon">
  <link rel="alternate" href="/blog/atom.xml"
    title="时光的涂鸦墙" type="application/atom+xml">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
</head>

<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/blog/">时光的涂鸦墙</a>
    </h1>
    <p class="site-description">code is poetry</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/blog/">主页</a></li>
      
        <li><a href="/blog/archives">归档</a></li>
      
        <li><a href="/blog/tags">标签</a></li>
      
        <li><a href="/blog/about">关于</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
  
  <h3 class="article-title"><span>
      AngularJs中的directive（一）</span></h3>
  
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/2016/07/04/AngularJs中的directive(一)/" rel="bookmark">
        <time class="entry-date published" datetime="2016-07-04T02:09:53.000Z">
          2016-07-04
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
      <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">"app"</span>,[]).directive(<span class="string">"directiveName"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">     <span class="keyword">return</span>&#123;  </span><br><span class="line">      <span class="comment">//通过设置项来定义  </span></span><br><span class="line">     &#125;;  </span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="restrict"><a href="#restrict" class="headerlink" title="restrict"></a>restrict</h2><p>类型：（字符串）可选参数</p>
<p>取值有：<code>E</code>(元素),<code>A</code>(属性),<code>C</code>(类),<code>M</code>(注释)，其中默认值为<code>A</code>；</p>
<ul>
<li><code>E</code>(元素)：<code>&lt;directiveName&gt;&lt;/directiveName&gt;</code></li>
<li><code>A</code>(属性)：<code>&lt;div directiveName=&#39;expression&#39;&gt;&lt;/div&gt;</code></li>
<li><code>C</code>(类)：<code>&lt;div class=&#39;directiveName&#39;&gt;&lt;/div&gt;</code></li>
<li><code>M</code>(注释)：<code>&lt;-- directive:directiveName expression--&gt;</code></li>
</ul>
<h2 id="template"><a href="#template" class="headerlink" title="template"></a>template</h2><p>类型：（字符串或者函数）可选参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'AEMC'</span>,</span><br><span class="line">        template: <span class="string">'&lt;div&gt;Hi everyone!&lt;/div&gt;'</span>,</span><br><span class="line">        replace: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>HTML代码为：<code>&lt;hello&gt;&lt;/hello&gt;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">"app"</span>,[]).directive(<span class="string">"directitle"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">return</span>&#123;  </span><br><span class="line">      restrict:<span class="string">'EAC'</span>,  </span><br><span class="line">     template: <span class="function"><span class="keyword">function</span>(<span class="params">tElement,tAttrs</span>)</span>&#123;  </span><br><span class="line">         <span class="keyword">var</span> _html = <span class="string">''</span>;  </span><br><span class="line">         _html += <span class="string">'&lt;div&gt;'</span>+tAttrs.title+<span class="string">'&lt;/div&gt;'</span>;  </span><br><span class="line">         <span class="keyword">return</span> _html;  </span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;;  </span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p>HTML代码为：<code>&lt;directitle title=&quot;biaoti&quot;&gt;&lt;/directitle&gt;</code></p>
<h2 id="templateUrl"><a href="#templateUrl" class="headerlink" title="templateUrl"></a>templateUrl</h2><p>类型：（字符串或者函数），可选参数</p>
<ul>
<li>一个代表HTML文件路径的字符串</li>
<li>一个函数，可接受两个参数tElement和tAttrs（大致同上）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">&#125;])</span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'AECM'</span>,</span><br><span class="line">        templateUrl: <span class="string">'hello-tpl.html'</span>,</span><br><span class="line">        replace: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意：在本地开发时候，需要运行一个服务器，不然使用templateUrl会报错</p>
<h2 id="templateCache"><a href="#templateCache" class="headerlink" title="templateCache"></a>templateCache</h2><p>由于加载html模板是通过异步加载的，若加载大量的模板会拖慢网站的速度，这里有个技巧，就是先缓存模板。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">//注射器加载完所有模块时，此方法执行一次</span></span><br><span class="line">myModule.run(<span class="function"><span class="keyword">function</span>(<span class="params">$templateCache</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//使用内置的方法缓存起来</span></span><br><span class="line">	$templateCache.put(<span class="string">"hello.html"</span>,<span class="string">"&lt;div&gt;Hello everyone!!!!!!&lt;/div&gt;"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$templateCache</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'AECM'</span>,</span><br><span class="line">        <span class="comment">//使用get方法获取</span></span><br><span class="line">        template: $templateCache.get(<span class="string">"hello.html"</span>),</span><br><span class="line">        replace: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><p>类型：（布尔值），默认值为false</p>
<p>如果设置repace:true的话，就会隐藏掉对于指令命名的html标签</p>
<p>类似<hello></hello>如果replace设置为true的话，就会消失不显示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    	restrict:<span class="string">"AE"</span>,</span><br><span class="line">    	template:<span class="string">"&lt;div&gt;Hello everyone!&lt;/div&gt;"</span>,</span><br><span class="line">    	<span class="comment">//可以嵌套，默认为false </span></span><br><span class="line">    	replace:<span class="literal">true</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>HTML代码为：<code>&lt;hello&gt;&lt;/hello&gt;</code></p>
<p>渲染之后的代码：<code>&lt;div&gt;&lt;h3&gt;hello world&lt;/h3&gt;&lt;/div&gt;</code></p>
<p>对比下没有开启<code>replace</code>时候的渲染出来的HTML。发现<code>&lt;hello&gt;&lt;/hello&gt;</code>不见了。</p>
<h2 id="transclude"><a href="#transclude" class="headerlink" title="transclude"></a>transclude</h2><p>类型：（布尔值或者字符<code>element</code>），默认值为<code>false</code>；</p>
<p>如果设置了<code>transclude</code>为<code>true</code>的话，就会把原本指令标签中用于写的东西放置到<code>ng-transclude</code> 中去。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict:<span class="string">"AE"</span>,</span><br><span class="line">        transclude:<span class="literal">true</span>,</span><br><span class="line">        template:<span class="string">"&lt;div&gt;Hello everyone!&lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;"</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>HTML代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hello</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>这里是指令内部的内容。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 注意:在一个指令的模板template上只能申明一个ng-transclude。</p>
<p> 如果我们想把嵌入部分多次放入我们的模板中要怎么办？则可以在<code>link</code>或者<code>controller</code>里面添加一个参数<code>$transclude</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">link:<span class="function"><span class="keyword">function</span>(<span class="params">$scope,$element,$attrs,controller,$transclude</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// clone 参数就是用户输入进去的内容。</span></span><br><span class="line">    $transclude(<span class="function"><span class="keyword">function</span>(<span class="params">clone</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// 进行其他操作。</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</span><br><span class="line">app.directive(<span class="string">'myLink'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict:<span class="string">'EA'</span>,</span><br><span class="line">        transclude:<span class="literal">true</span>,</span><br><span class="line">        controller:<span class="function"><span class="keyword">function</span>(<span class="params">$scope,$element,$attrs,$transclude</span>)</span>&#123;</span><br><span class="line">            $transclude(<span class="function"><span class="keyword">function</span>(<span class="params">clone</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> a  = angular.element(<span class="string">'&lt;a&gt;'</span>);</span><br><span class="line">                a.attr(<span class="string">'href'</span>,$attrs.value);</span><br><span class="line">                a.attr(<span class="string">'target'</span>,$attrs.target);</span><br><span class="line">                a.text(clone.text());</span><br><span class="line">                $element.append(a);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>HTML代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">my-link</span> <span class="attr">value</span>=<span class="string">" target="</span><span class="attr">_blank</span>"&gt;</span>百度<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="transclude-’element’-和-transclude-true-的区别"><a href="#transclude-’element’-和-transclude-true-的区别" class="headerlink" title="transclude:’element’ 和  transclude:true 的区别"></a>transclude:’element’ 和  transclude:true 的区别</h4><p>有时候我们要嵌入指令元素本身，而不仅仅是他的内容，这种情况下，我们需要使用<code>transclude:&quot;element&quot;</code>,和<code>transclude:true</code>不同，他讲标记了<code>ng-transclude</code>指令的元素一起包含到了指令模板中，使用<code>transclusion</code>， 你的<code>link</code>函数会获取到一个叫<code>transclude</code>的链接函数，这个函数绑定了正确的指令<code>scope</code>，并且传入了另外一个拥有被嵌入dom元素拷贝的函数，你可以在这个<code>transclude</code>函数中执行比如修改元素拷贝或者将他添加到dom上等操。</p>
<h2 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h2><p>类型：可选参数，（布尔值或者对象）</p>
<ul>
<li>默认值false，表示继承父作用域（儿子继承父亲的值，改变父亲的值，儿子的值也随之变化，反之亦如此）;</li>
<li>true，表示继承父作用域，并创建自己的作用域（子作用域）（儿子继承父亲的值，改变父亲的值，儿子的值随之变化，但是改变儿子的值，父亲的值不变）;</li>
<li>{}，表示创建一个全新的隔离作用域（没有继承父亲的值，所以儿子的值为空，改变任何一方的值均不能影响另一方的值）；</li>
</ul>
<p>为了让隔离作用域能读取父作用域的属性，产生了绑定策略：</p>
<h4 id="使用-（-attr）来进行单向文本（字符串）绑定"><a href="#使用-（-attr）来进行单向文本（字符串）绑定" class="headerlink" title="使用@（@attr）来进行单向文本（字符串）绑定"></a>使用@（@attr）来进行单向文本（字符串）绑定</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);  </span><br><span class="line">app.controller(<span class="string">'MainController'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);  </span><br><span class="line">app.directive(<span class="string">'helloWorld'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line"><span class="keyword">return</span> &#123;  </span><br><span class="line"> scope: &#123;<span class="attr">color</span>:<span class="string">'@colorAttr'</span>&#125;,  <span class="comment">//指明了隔离作用域中的属性color应该绑定到属性colorAttr  </span></span><br><span class="line"> restrict: <span class="string">'AE'</span>,  </span><br><span class="line"> replace: <span class="literal">true</span>,  </span><br><span class="line"> template: <span class="string">'&lt;p style="background-color:&#123;&#123;color&#125;&#125;"&gt;Hello World&lt;/p&gt;'</span>        </span><br><span class="line">&#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>HTML代码为：<code>&lt;hello-world color-attr=&#39;&#39;&gt;&lt;/hello-world&gt;</code>  </p>
<p>这种办法只能单向，通过在运行的指令的那个html标签上设置<code>color-attr</code>属性，并且采用双层花括号绑定某个模型值。</p>
<p>提示：如果绑定的隔离作用域属性名与元素的属性名相同，则可以采取缺省写法。</p>
<p>HTML代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hello-world</span> <span class="attr">color</span>=<span class="string">"&#123;&#123;color&#125;&#125;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">hello-world</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js定义指令的片段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.directive(<span class="string">'helloWorld'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line"> <span class="keyword">return</span> &#123;  </span><br><span class="line">     scope: &#123;  </span><br><span class="line">         color: <span class="string">'@'</span>  </span><br><span class="line">     &#125;,  </span><br><span class="line">     ...  </span><br><span class="line">     <span class="comment">//配置的余下部分  </span></span><br><span class="line"> &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="使用-（-attr）进行双向绑定"><a href="#使用-（-attr）进行双向绑定" class="headerlink" title="使用=（=attr）进行双向绑定"></a>使用=（=attr）进行双向绑定</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);  </span><br><span class="line">app.controller(<span class="string">'MainController'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);  </span><br><span class="line">app.directive(<span class="string">'helloWorld'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line"><span class="keyword">return</span> &#123;  </span><br><span class="line"> scope:&#123;<span class="attr">color</span>:<span class="string">'='</span>&#125;,  </span><br><span class="line"> restrict: <span class="string">'AE'</span>,  </span><br><span class="line"> replace: <span class="literal">true</span>,  </span><br><span class="line"> template: <span class="string">'&lt;div style="background-color:&#123;&#123;color&#125;&#125;"&gt;Hello World&lt;div&gt;&lt;input type="text" ng-model="color"&gt;&lt;/div&gt;&lt;/div&gt;'</span>        </span><br><span class="line">&#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>HTML代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"color"</span> <span class="attr">placeholder</span>=<span class="string">"Enter a color"</span>/&gt;</span>  </span><br><span class="line">  &#123;&#123;color&#125;&#125;  </span><br><span class="line"><span class="tag">&lt;<span class="name">hello-world</span> <span class="attr">color</span>=<span class="string">'color'</span>&gt;</span><span class="tag">&lt;/<span class="name">hello-world</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="使用-amp-来调用父作用域中的函数"><a href="#使用-amp-来调用父作用域中的函数" class="headerlink" title="使用&amp;来调用父作用域中的函数"></a>使用&amp;来调用父作用域中的函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</span><br><span class="line">	$scope.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">		alert(<span class="string">"Hello "</span> + name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;])</span><br><span class="line">myModule.directive(<span class="string">"greeting"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    	restrict:<span class="string">'AE'</span>,</span><br><span class="line">        scope:&#123;</span><br><span class="line">        	greet:<span class="string">'&amp;'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template:<span class="string">'&lt;input type="text" ng-model="userName" /&gt;&lt;br/&gt;'</span>+</span><br><span class="line">        		 <span class="string">'&lt;button class="btn btn-default" ng-click="greet(&#123;name:userName&#125;)"&gt;Greeting&lt;/button&gt;&lt;br/&gt;'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>HTML代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">greeting</span> <span class="attr">greet</span>=<span class="string">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="name">greeting</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>备注：</p>
<ul>
<li>&amp; 父级作用域： 传递进来的参数必须是父级的函数方法，  然后在指令中，通过 test() 获取到 传递进来的函数，这个还不够，还必须再执行一次 test()() 才是真正的执行这个方法。</li>
<li>@ 本地作用域： 只能传递字符串进来，对于方法或者对象是传递不进来的。</li>
<li>= 双向属性： 可以传递对象进来，也可以是字符串，但是不能传递方法。  同时可以在指令中修改这个对象，父级里面的这个对象也会跟着修改的。</li>
</ul>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

      

      
      

      <span class="post-tags">
        <a href="/blog/tags/angular/">angular</a>
      </span>
      

    </div>

    
  </div>
</article>


<section id="comment" class="comment">
	<div id="gitment"></div>
</section>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		owner: 'lingmissing',
		repo: 'lingmissing-gitment',
		oauth: {
			client_id: 'c7675a51f3f7416ac3c0',
			client_secret: 'cac3475af0adfc9d1669114ef89e8c6ff59ac758',
		},
	})
	gitment.render('gitment')
</script>



    </main>

    <footer class="site-footer">
  <p class="site-info">
    
    &copy;
    2019
    elaine
    
  </p>
</footer>
    
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-75095706-1', 'auto');
    ga('send', 'pageview');
</script>

  </div>
</div>
</body>
</html>